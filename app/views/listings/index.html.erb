<div class="container container-fluid">
  <%= render "shared/sidebar" %>
    <div class="content">

<h2>All Listings</h2>
<div class="sorting">
  <p class="sorting-links">Sort By: <%= sort_link(@q, :title, default_order: :asc) %></p>
  <p class="sorting-links">Sort By: <%= sort_link(@q, :price, default_order: :asc) %></p>
</div>

<% @listings.each do |listing| %>

<div class="card" style="width: 30rem;">
  <div class="row no-gutters">
    <div class="col-md-12">

  <%# The below link to helper allows the photo or listing title to be clicked on which will take you to view that product singurlarly in "show" %>
    <%= link_to listing_path(listing) do %>

  <%# The below renders the partial to handle image display %>
  <div class="card-top">
    <div class="index-image">
      <%= render "image-logic", listing: listing %>
    </div>
    <div class="card-top-text">
      <h5 class="card-title"> <%= listing.title %> </h5>
      <% end %>
      <h6 class="card-subtitle mb-2 text-muted"><%= number_to_currency(listing.price) %> / <%= listing.uom.unit %></h6>
      <p class="card-text"><small class="text-muted"> Category: <%= listing.category.name %> (<%= listing.subcategory.name %>)</small></p>
      <p class="card-text">Description: <%= listing.description %> </p>
      </div>
  </div>

  </div>

    <div class="col-md-12">
      <div class="card-body">

        <!-- <h6 class="card-subtitle mb-2 text-muted"> Qty Avail: <%= listing.qty %> </h6> -->

      <p class="text">📍<%= listing.user.location.suburb %> </p>    
      <p class="text"> 👨‍🌾 Grown by: <%= listing.user.first_name %> </p>

        <%# **** NEED TO SETUP UP LINK TO VIEW ALL GROWERS PRODUCE LISTINGS *****%>
      <!-- <a href="#" class="btn btn-light">View All <%= listing.user.first_name %>'s Produce</a> -->
      </div> </p>
    </div>

  </div>
</div>

<% end %>


<%= render "shared/back" %>
</div>
</div>
</div>

<%# <div class="card" style="width: 30rem;">
  <div class="row no-gutters">
    <div class="col-md-4">
      <img src="..." class="card-img" alt="...">
    </div>
    <div class="col-md-8">
      <div class="card-body">
        <h5 class="card-title">Card title</h5>
        <h6 class="card-subtitle mb-2 text-muted">Card subtitle</h6>

        <p class="card text-justify">This is a wider card with supporting text below as a natural lead-in to additional content. This content is a little bit longer.</p>
        <a href="#" class="btn btn-primary">Go somewhere</a>

        <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
      </div>
    </div>
  </div>
</div> %>
